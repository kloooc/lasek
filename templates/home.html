<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>Silver Leaf</title>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='styles/css/styles.css') }}">
    <link href='https://cdn.jsdelivr.net/npm/boxicons@2.0.5/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <header class="l-header" id="header">
        <nav class="nav bd-container">
            <a href="#" class="nav__logo"><h1>Silver Leaf.</h1></a>
            <div class="nav__menu" id="nav-menu">
                <ul class="nav__list">
                    <li class="nav__item"><a href="#home" class="nav__link active-link">Home</a></li>
                    <li class="nav__item"><a href="#about" class="nav__link">About</a></li>
                    {% if current_user.is_authenticated %}
                        <script>
                            localStorage.removeItem('notificationsRead');
                        </script>
                        {% if current_user.status == 'admin' %}
                            <li class="nav__item"><a href="{{ url_for('admin') }}" class="nav__link">Panel Admina</a></li>
                        {% endif %}
                        <li class="nav__item"><a href="{{ url_for('logout') }}" class="nav__link">Wyloguj</a></li>
                    {% else %}
                        <li class="nav__item"><a href="{{ url_for('login') }}" class="nav__link">Log in</a></li>
                        <li class="nav__item"><a href="{{ url_for('register_page') }}" class="nav__link">Register</a></li>
                    {% endif %}
                    <li class="nav__item"><a href="#contact" class="nav__link">Contact us</a></li>
                    {% set reminders = messages|selectattr("category", "equalto", "reminder")|list %}
                    <li class="nav__item" style="position: relative; cursor: pointer;" id="notification-icon">
                        <i class='bx bx-bell'></i>
                        {% if reminders|length > 0 %}
                            <span id="notification-count" style="position: absolute; top: 0; right: 0; background: red; color: white; font-size: 12px; border-radius: 50%; padding: 0 6px;">
                                {{ reminders|length }}
                            </span>
                        {% endif %}
                        <!-- Dropdown z przypomnieniami -->
                        <div id="notification-dropdown" style="display: none; position: absolute; top: 30px; right: 0; background: white; border: 1px solid #ccc; border-radius: 5px; width: 280px; box-shadow: 0 2px 6px rgba(0,0,0,0.2); z-index: 1000; max-height: 300px; overflow-y: auto;">
                            {% for r in reminders %}
                                <div style="padding: 10px; border-bottom: 1px solid #eee; font-size: 14px;">
                                    ðŸ”” {{ r.content }}
                                </div>
                            {% endfor %}
                        </div>
                    </li>
                    <li><i class='bx bx-moon change-theme' id="theme-button"></i></li>
                </ul>
            </div>
            <div class="nav__toggle" id="nav-toggle">
                <i class='bx bx-menu'></i>
            </div>
        </nav>
    </header>


        <main class="l-main">
            <!--========== HOME ==========-->
            <section class="home" id="home">
                <div class="home__container bd-container bd-grid">
                    <div class="home__data">
                        <h1 class="home__title">Welcome!<br>Try our food</h1>
                        <h3 class="home__subtitle">Nothing brings people together like good food.</h3>
                        <a href="{{ url_for('reserve') }}" class="button">Reserve Table</a>
                    </div>

                    <img src="{{url_for('static', filename='styles/img/home.png')}}" alt = "" class="home__img">
                </div>
            </section>

            <!--========== ABOUT ==========-->
            <section class="about section bd-container" id="about">
                <div class="about__container  bd-grid">
                    <div class="about__data">
                        <span class="section-subtitle about__initial">About us</span>
                        <h2 class="section-title about__initial">We cook the best <br> tasty food</h2>
                        <p class="about__description">We cook the best food in the entire city, with excellent customer service, the best meals and at the best price, visit us.</p>
                        <a href="#" class="button">Explore history</a>
                    </div>

                    <img src="static/styles/img/about.jpg" alt="" class="about__img">
                </div>
            </section>

            <!--========== CONTACT US ==========-->
            <section class="contact section bd-container" id="contact">
                <div class="contact__container bd-grid">
                    <div class="contact__data">
                        <span class="section-subtitle contact__initial">Let's talk</span>
                        <h2 class="section-title contact__initial">Contact us</h2>
                        <p class="contact__description">We would love to hear from you!<br> For any queries, please contact us.<br>Feel free to contact and suggest the improvements that are required for this website</p>
                    </div>

                    <div class="contact__button">
                        <a href="#" class="button">Contact us now</a>
                    </div>
                </div>
            </section>
        </main>

        <!--========== FOOTER ==========-->
        <footer class="footer section bd-container">
            <div class="footer__container bd-grid">
                <div class="footer__content">
                    <a href="#" class="footer__logo">Silver Leaf</a>
                    <span class="footer__description">Restaurant</span>
                    <div>
                        <a href="#" class="footer__social"><i class='bx bxl-facebook'></i></a>
                        <a href="#" class="footer__social"><i class='bx bxl-instagram'></i></a>
                        <a href="#" class="footer__social"><i class='bx bxl-twitter'></i></a>
                    </div>
                </div>

                <div class="footer__content">
                    <h3 class="footer__title">Services</h3>
                    <ul>
                        <li><a href="table.html" class="footer__link">Table Reservation</a></li>
                    </ul>
                </div>

                <div class="footer__content">
                    <h3 class="footer__title">Information</h3>
                    <ul>
                        <li><a href="#" class="footer__link">Event</a></li>
                        <li><a href="#" class="footer__link">Contact us</a></li>
                        <li><a href="#" class="footer__link">Privacy policy</a></li>
                        <li><a href="#" class="footer__link">Terms of services</a></li>
                    </ul>
                </div>

                <div class="footer__content">
                    <h3 class="footer__title">Address</h3>
                    <ul>
                        <li>Park Street, Taltala</li>
                        <li>Kolkata, West Bengal</li>
                        <li>031-4281-7093</li>
                        <li>silverleaf@gmail.com</li>
                    </ul>
                </div>
            </div>

            <p class="footer__copy">&#169; 2021 Group-37. All rights reserved</p>
        </footer>
        <!--========== FOOTER ENDS ==========-->

        <!--========== SCROLL REVEAL ==========-->
        <script src="https://unpkg.com/scrollreveal"></script>

        <!--========== MAIN JS ==========-->
        <script src="static/styles/js/main.js"></script>
    <script src="{{ url_for('static', filename='styles/js/main.js') }}"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const messages = {{ messages | tojson }};
            messages.forEach(function(message) {
                Swal.fire({
                    icon: message.category === 'success' ? 'success' : 'error',
                    title: message.category === 'success' ? 'Sukces' : 'BÅ‚Ä…d',
                    text: message.content,
                    confirmButtonText: 'OK'
                });
            });
        });
        document.addEventListener("DOMContentLoaded", function() {
        const icon = document.getElementById('notification-icon');
        const dropdown = document.getElementById('notification-dropdown');
        const count = document.getElementById('notification-count');

        if (!icon) return;

        // JeÅ›li juÅ¼ czytane - ukryj licznik i dropdown
        if (localStorage.getItem('notificationsRead')) {
            if(count) count.style.display = 'none';
            dropdown.style.display = 'none';
        }

        icon.addEventListener('click', () => {
            if (dropdown.style.display === 'none') {
                dropdown.style.display = 'block';
                // Zaznacz jako przeczytane
                localStorage.setItem('notificationsRead', 'true');
                if(count) count.style.display = 'none';
            } else {
                dropdown.style.display = 'none';
            }
        });

        // KlikniÄ™cie poza dropdown ukrywa go
        document.addEventListener('click', (event) => {
            if (!icon.contains(event.target)) {
                dropdown.style.display = 'none';
            }
        });
    });
    </script>
</body>
</html>